Implement a separate B2B platform for service providers.

## Overview

Create a parallel interface for cleaning companies, personal assistants, and other service providers to:
1. Manage their clients (households)
2. Schedule their staff
3. Track invoicing
4. View their performance
5. Get new leads

## Database Schema

Add to shared/schema.ts:

export const serviceProviderTypeEnum = pgEnum("service_provider_type", [
  "CLEANING_COMPANY", "PERSONAL_ASSISTANT", "HANDYMAN", "LANDSCAPER",
  "POOL_SERVICE", "PET_CARE", "MEAL_PREP", "ORGANIZING", "OTHER"
]);

export const serviceProviders = pgTable("service_providers", {
  id: varchar("id").primaryKey().$defaultFn(() => crypto.randomUUID()),
  
  // Business info
  businessName: varchar("business_name", { length: 200 }).notNull(),
  type: serviceProviderTypeEnum("type").notNull(),
  description: text("description"),
  logoUrl: text("logo_url"),
  
  // Contact
  email: varchar("email", { length: 255 }).notNull().unique(),
  phone: varchar("phone", { length: 20 }),
  website: varchar("website", { length: 255 }),
  
  // Address
  address: text("address"),
  city: varchar("city", { length: 100 }),
  state: varchar("state", { length: 50 }),
  postalCode: varchar("postal_code", { length: 20 }),
  serviceRadius: integer("service_radius"), // miles
  
  // Legal
  businessLicense: varchar("business_license", { length: 100 }),
  insuranceProvider: varchar("insurance_provider", { length: 100 }),
  insurancePolicyNumber: varchar("insurance_policy_number", { length: 100 }),
  insuranceExpires: date("insurance_expires"),
  bondAmount: integer("bond_amount"),
  
  // Subscription
  subscriptionTier: varchar("subscription_tier", { length: 20 }).default("STARTER"), // STARTER, GROWTH, ENTERPRISE
  subscriptionStatus: varchar("subscription_status", { length: 20 }).default("TRIAL"),
  trialEndsAt: timestamp("trial_ends_at"),
  
  // Verification
  isVerified: boolean("is_verified").default(false),
  verifiedAt: timestamp("verified_at"),
  backgroundCheckCompleted: boolean("background_check_completed").default(false),
  
  // Stats
  totalClients: integer("total_clients").default(0),
  averageRating: numeric("average_rating", { precision: 3, scale: 2 }),
  totalReviews: integer("total_reviews").default(0),
  
  // Settings
  settings: jsonb("settings"),
  
  createdAt: timestamp("created_at").defaultNow().notNull(),
  updatedAt: timestamp("updated_at").defaultNow().notNull(),
});

export const providerStaff = pgTable("provider_staff", {
  id: varchar("id").primaryKey().$defaultFn(() => crypto.randomUUID()),
  providerId: varchar("provider_id").references(() => serviceProviders.id).notNull(),
  
  // User link (if they have hndld account)
  userId: varchar("user_id"),
  
  // Staff info
  firstName: varchar("first_name", { length: 50 }).notNull(),
  lastName: varchar("last_name", { length: 50 }).notNull(),
  email: varchar("email", { length: 255 }),
  phone: varchar("phone", { length: 20 }),
  
  // Role
  role: varchar("role", { length: 50 }).default("STAFF"), // OWNER, MANAGER, STAFF
  permissions: jsonb("permissions"),
  
  // Status
  isActive: boolean("is_active").default(true),
  hireDate: date("hire_date"),
  
  // Rates
  hourlyRate: integer("hourly_rate"), // cents
  
  createdAt: timestamp("created_at").defaultNow().notNull(),
});

export const providerClients = pgTable("provider_clients", {
  id: varchar("id").primaryKey().$defaultFn(() => crypto.randomUUID()),
  providerId: varchar("provider_id").references(() => serviceProviders.id).notNull(),
  householdId: varchar("household_id").references(() => households.id).notNull(),
  
  // Relationship
  status: varchar("status", { length: 20 }).default("ACTIVE"), // ACTIVE, PAUSED, ENDED
  startDate: date("start_date").notNull(),
  endDate: date("end_date"),
  
  // Service details
  serviceFrequency: varchar("service_frequency", { length: 50 }), // WEEKLY, BIWEEKLY, etc.
  preferredDay: varchar("preferred_day", { length: 20 }),
  preferredTime: time("preferred_time"),
  
  // Pricing
  baseRateCents: integer("base_rate_cents"),
  estimatedHours: numeric("estimated_hours", { precision: 4, scale: 2 }),
  
  // Assignment
  assignedStaffId: varchar("assigned_staff_id").references(() => providerStaff.id),
  
  // Notes
  clientNotes: text("client_notes"),
  accessInstructions: text("access_instructions"),
  
  createdAt: timestamp("created_at").defaultNow().notNull(),
  updatedAt: timestamp("updated_at").defaultNow().notNull(),
}, (table) => ({
  providerIdx: index("provider_clients_provider_idx").on(table.providerId),
  householdIdx: index("provider_clients_household_idx").on(table.householdId),
  uniqueRelation: unique("provider_household_unique").on(table.providerId, table.householdId),
}));

export const providerSchedule = pgTable("provider_schedule", {
  id: varchar("id").primaryKey().$defaultFn(() => crypto.randomUUID()),
  providerId: varchar("provider_id").references(() => serviceProviders.id).notNull(),
  providerClientId: varchar("provider_client_id").references(() => providerClients.id).notNull(),
  staffId: varchar("staff_id").references(() => providerStaff.id),
  
  // Schedule
  scheduledDate: date("scheduled_date").notNull(),
  scheduledTime: time("scheduled_time"),
  estimatedDuration: integer("estimated_duration"), // minutes
  
  // Status
  status: varchar("status", { length: 20 }).default("SCHEDULED"),
  // SCHEDULED, CONFIRMED, IN_PROGRESS, COMPLETED, CANCELLED, NO_SHOW
  
  // Actual times
  arrivedAt: timestamp("arrived_at"),
  completedAt: timestamp("completed_at"),
  
  // Notes
  providerNotes: text("provider_notes"),
  clientNotes: text("client_notes"),
  
  createdAt: timestamp("created_at").defaultNow().notNull(),
});

## Server Implementation

Create server/routes/provider/*.ts for:
- /provider/dashboard - overview stats
- /provider/clients - client management
- /provider/staff - staff management
- /provider/schedule - scheduling
- /provider/invoices - invoicing
- /provider/leads - lead generation from marketplace

## Client Implementation

Create separate provider portal pages in client/src/pages/provider/:
- dashboard.tsx - overview
- clients.tsx - client list
- client-detail.tsx - single client view
- schedule.tsx - calendar view
- staff.tsx - staff management
- invoices.tsx - billing
- settings.tsx - business settings
- leads.tsx - marketplace leads

## Authentication

Add provider role to auth system. Providers can:
1. Create a provider account
2. Link to existing households (as vendor)
3. Access provider-specific routes