<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>hndld - Siri Shortcuts Setup Guide</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Inter', 'Segoe UI', sans-serif;
      background: #F6F2EA;
      color: #1D2A44;
      line-height: 1.6;
      padding: 0 0 80px;
    }
    .header {
      background: #1D2A44;
      color: #F6F2EA;
      padding: 40px 20px;
      text-align: center;
    }
    .header h1 { font-size: 28px; font-weight: 300; letter-spacing: 2px; margin-bottom: 8px; }
    .header p { opacity: 0.7; font-size: 14px; }
    .container { max-width: 640px; margin: 0 auto; padding: 24px 20px; }
    .step {
      background: white;
      border-radius: 16px;
      padding: 24px;
      margin-bottom: 16px;
      box-shadow: 0 1px 3px rgba(29,42,68,0.08);
    }
    .step-number {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 32px;
      height: 32px;
      background: #1D2A44;
      color: #F6F2EA;
      border-radius: 50%;
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 12px;
    }
    .step h2 { font-size: 18px; font-weight: 600; margin-bottom: 8px; }
    .step p { font-size: 14px; color: #555; margin-bottom: 12px; }
    .step code {
      display: block;
      background: #F0EDE5;
      padding: 12px 16px;
      border-radius: 8px;
      font-size: 13px;
      font-family: 'SF Mono', 'Menlo', monospace;
      overflow-x: auto;
      word-break: break-all;
      margin: 8px 0;
    }
    .step .note {
      background: #FFF9E6;
      border-left: 3px solid #D4C5A0;
      padding: 12px 16px;
      border-radius: 0 8px 8px 0;
      font-size: 13px;
      color: #7A6B3A;
      margin-top: 12px;
    }
    .shortcut-card {
      background: white;
      border-radius: 16px;
      padding: 20px;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 16px;
      box-shadow: 0 1px 3px rgba(29,42,68,0.08);
    }
    .shortcut-icon {
      width: 48px;
      height: 48px;
      border-radius: 12px;
      background: #1D2A44;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 22px;
      flex-shrink: 0;
    }
    .shortcut-info h3 { font-size: 16px; font-weight: 600; margin-bottom: 2px; }
    .shortcut-info p { font-size: 13px; color: #888; }
    .shortcut-info .voice { font-size: 12px; color: #1D2A44; font-style: italic; margin-top: 4px; }
    .section-title {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 1.5px;
      color: #999;
      margin: 24px 0 12px;
      font-weight: 600;
    }
    .endpoint-list {
      background: white;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 1px 3px rgba(29,42,68,0.08);
      margin-bottom: 24px;
    }
    .endpoint-item {
      padding: 14px 20px;
      border-bottom: 1px solid #F0EDE5;
      font-size: 13px;
    }
    .endpoint-item:last-child { border-bottom: none; }
    .endpoint-item .method {
      display: inline-block;
      font-size: 11px;
      font-weight: 700;
      padding: 2px 6px;
      border-radius: 4px;
      margin-right: 8px;
    }
    .method.get { background: #E8F5E9; color: #2E7D32; }
    .method.post { background: #E3F2FD; color: #1565C0; }
    .method.delete { background: #FFEBEE; color: #C62828; }
    .endpoint-item .path { font-family: 'SF Mono', monospace; }
    .endpoint-item .desc { display: block; color: #888; margin-top: 4px; }
  </style>
</head>
<body>
  <div class="header">
    <h1>HNDLD</h1>
    <p>Siri Shortcuts Setup Guide</p>
  </div>
  <div class="container">
    <p class="section-title">Getting Started</p>

    <div class="step">
      <div class="step-number">1</div>
      <h2>Generate Your API Token</h2>
      <p>Open hndld in your browser and go to <strong>Settings</strong>. You can also generate a token by calling this endpoint while logged in:</p>
      <code>POST /api/v1/shortcuts/token<br>Body: { "name": "My iPhone" }</code>
      <p>Copy the token that's returned. You'll need it for each shortcut.</p>
      <div class="note">Keep your token private. It gives access to your household data. You can revoke it anytime from Settings.</div>
    </div>

    <div class="step">
      <div class="step-number">2</div>
      <h2>Create a Shortcut in iOS</h2>
      <p>Open the <strong>Shortcuts</strong> app on your iPhone or iPad. Tap the <strong>+</strong> button to create a new shortcut.</p>
      <p>Add a <strong>"Get Contents of URL"</strong> action and configure it:</p>
      <code>URL: https://your-app-url.replit.app/api/v1/shortcuts/next-cleaning<br>Method: GET<br>Headers:<br>  Authorization: Bearer YOUR_TOKEN_HERE</code>
    </div>

    <div class="step">
      <div class="step-number">3</div>
      <h2>Make Siri Read the Response</h2>
      <p>After the URL action, add:</p>
      <p>1. <strong>"Get Dictionary Value"</strong> action - set key to <code>spoken</code></p>
      <p>2. <strong>"Speak Text"</strong> action - it will read the response aloud</p>
      <p>Then name your shortcut (e.g., "Next Cleaning") so you can say <em>"Hey Siri, next cleaning"</em>.</p>
    </div>

    <div class="step">
      <div class="step-number">4</div>
      <h2>For Message Shortcuts (POST)</h2>
      <p>For shortcuts that send data (like messaging your assistant), set the method to <strong>POST</strong> and add a request body:</p>
      <code>Method: POST<br>Body (JSON):<br>{<br>  "message": "Your message here",<br>  "category": "HOUSEHOLD",<br>  "urgency": "MEDIUM"<br>}</code>
      <p>Use the <strong>"Ask for Input"</strong> action before the URL action to let Siri ask what you want to say, then pass that input as the message.</p>
    </div>

    <p class="section-title">Available Shortcuts</p>

    <div class="shortcut-card">
      <div class="shortcut-icon">‚ú®</div>
      <div class="shortcut-info">
        <h3>Next Cleaning</h3>
        <p>Check when your next cleaning visit is scheduled</p>
        <div class="voice">"Hey Siri, when's my next cleaning?"</div>
      </div>
    </div>

    <div class="shortcut-card">
      <div class="shortcut-icon">‚úÖ</div>
      <div class="shortcut-info">
        <h3>Check Approvals</h3>
        <p>See what items are waiting for your approval</p>
        <div class="voice">"Hey Siri, check my approvals"</div>
      </div>
    </div>

    <div class="shortcut-card">
      <div class="shortcut-icon">üí¨</div>
      <div class="shortcut-info">
        <h3>Message Assistant</h3>
        <p>Send a quick request or message to your assistant</p>
        <div class="voice">"Hey Siri, message my assistant"</div>
      </div>
    </div>

    <div class="shortcut-card">
      <div class="shortcut-icon">üí∞</div>
      <div class="shortcut-info">
        <h3>Monthly Spending</h3>
        <p>Check how much you've spent this month</p>
        <div class="voice">"Hey Siri, how much have I spent?"</div>
      </div>
    </div>

    <div class="shortcut-card">
      <div class="shortcut-icon">üè†</div>
      <div class="shortcut-info">
        <h3>Household Status</h3>
        <p>Quick overview of tasks, approvals, and requests</p>
        <div class="voice">"Hey Siri, household status"</div>
      </div>
    </div>

    <p class="section-title">API Endpoints Reference</p>

    <div class="endpoint-list">
      <div class="endpoint-item">
        <span class="method get">GET</span>
        <span class="path">/api/v1/shortcuts/next-cleaning</span>
        <span class="desc">Next scheduled cleaning visit</span>
      </div>
      <div class="endpoint-item">
        <span class="method get">GET</span>
        <span class="path">/api/v1/shortcuts/pending-approvals</span>
        <span class="desc">List pending approvals</span>
      </div>
      <div class="endpoint-item">
        <span class="method post">POST</span>
        <span class="path">/api/v1/shortcuts/approve/:id</span>
        <span class="desc">Approve a specific item by ID</span>
      </div>
      <div class="endpoint-item">
        <span class="method post">POST</span>
        <span class="path">/api/v1/shortcuts/message</span>
        <span class="desc">Send message to your assistant</span>
      </div>
      <div class="endpoint-item">
        <span class="method get">GET</span>
        <span class="path">/api/v1/shortcuts/spending</span>
        <span class="desc">Monthly spending breakdown</span>
      </div>
      <div class="endpoint-item">
        <span class="method get">GET</span>
        <span class="path">/api/v1/shortcuts/status</span>
        <span class="desc">Quick household overview</span>
      </div>
    </div>

    <p class="section-title">Token Management</p>

    <div class="endpoint-list">
      <div class="endpoint-item">
        <span class="method post">POST</span>
        <span class="path">/api/v1/shortcuts/token</span>
        <span class="desc">Generate a new API token (requires login)</span>
      </div>
      <div class="endpoint-item">
        <span class="method get">GET</span>
        <span class="path">/api/v1/shortcuts/tokens</span>
        <span class="desc">List your tokens (requires login)</span>
      </div>
      <div class="endpoint-item">
        <span class="method delete">DELETE</span>
        <span class="path">/api/v1/shortcuts/tokens/:id</span>
        <span class="desc">Revoke a token (requires login)</span>
      </div>
    </div>

    <div class="step">
      <h2>All responses include:</h2>
      <p><strong>spoken</strong> - A natural language sentence designed to be read aloud by Siri</p>
      <p><strong>data</strong> - Structured data for use in more advanced shortcuts</p>
      <p>This means every shortcut endpoint works perfectly with Siri's "Speak Text" action for a hands-free experience.</p>
    </div>
  </div>
</body>
</html>
